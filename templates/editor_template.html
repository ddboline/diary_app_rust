<!DOCTYPE html>
<html>
<body>

<form>
  <textarea name="message" id="diary_editor_form" rows=50 cols=100>CURRENT_DIARY_TEXT</textarea>
  <br>
  <input type="button" name="update" value="Update" onclick="submitFormData()">
</form>

<script language="JavaScript" type="text/javascript">
    function submitFormData() {
        let url = '../api/replace';
        let text = document.getElementById('diary_editor_form');
        let data = JSON.stringify({'date': 'DIARY_DATE', 'text': text});
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.open('POST', url, true);
        xmlhttp.onload = function see_result() {
            location.replace('../api/search?date=DIARY_DATE')
        }
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
        xmlhttp.send(data);
    }
</script>

</body>
</html>
